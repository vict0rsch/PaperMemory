const findEl=(e,a)=>void 0===a?"string"==typeof e?document.getElementById(e):e:findEl("memory-container--"+e).querySelector("."+a),fadeOut=(e,a=250,t=()=>{})=>{(e=findEl(e)).style.transition=a+"ms",e.style.opacity=0,setTimeout(()=>{e.style.display="none",t()},a)},fadeIn=(e,a="block",t=250,n=()=>{})=>{(e=findEl(e)).style.opacity=0,"none"===e.style.display&&(e.style.display=a),setTimeout(()=>{e.style.transition=t+"ms",e.style.opacity=1,setTimeout(()=>{n()},t)},0)},val=(e,a)=>{if(e instanceof HTMLInputElement&&"checkbox"===e.type){if(void 0===a)return e.checked;e.checked=a}if("string"==typeof e&&(e=findEl(e)),void 0===a)return e?e.value:"";e&&(e.value=a)},showId=(e,a="block")=>{let t=findEl(e);t&&(t.style.display=a)},hideId=e=>{el=findEl(e),el&&(el.style.display="none")},setTextId=(e,a)=>{let t=findEl(e);t&&(t.innerText=a)},setHTML=(e,a)=>{(e="string"==typeof e?findEl(e):e)&&(e.innerHTML=a)},dispatch=(e,a)=>{if("string"==typeof e&&(e=findEl(e)),"string"==typeof a){if("focus"===a)return void e.focus();if("blur"===a)return void e.blur();a=new Event(a)}e&&e.dispatchEvent(a)},hasClass=(e,a)=>{let t;if(t="string"==typeof e?findEl(e):e,t)return t.classList.contains(a)},addClass=(e,a)=>{let t;t="string"==typeof e?findEl(e):e,t&&t.classList.add(a)},removeClass=(e,a)=>{let t;t="string"==typeof e?findEl(e):e,t&&t.classList.remove(a)},addListener=(e,a,t)=>{(e="string"==typeof e?findEl(e):e)&&e.addEventListener(a,t)},setPlaceholder=(e,a)=>{(e="string"==typeof e?findEl(e):e)&&void 0!==e.placeholder&&(e.placeholder=a)},style=(e,a,t)=>{if(e="string"==typeof e?findEl(e):e){if(void 0===t)return e.style[a];e.style[a]=t}},disable=(e,a=!0)=>{(e="string"==typeof e?findEl(e):e)&&(e.disabled=a)},slideUp=(e,a=250,t=()=>{})=>{(e="string"==typeof e?findEl(e):e)&&(e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=a+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.style.removeProperty("box-sizing"),t()},a))},slideDown=(a,t=500,n=()=>{})=>{if(a="string"==typeof a?findEl(a):a){a.style.removeProperty("display");let e=window.getComputedStyle(a).display;"none"===e&&(e="block"),a.style.display=e;var o=a.offsetHeight;a.style.overflow="hidden",a.style.height=0,a.style.paddingTop=0,a.style.paddingBottom=0,a.style.marginTop=0,a.style.marginBottom=0,a.offsetHeight,a.style.transitionProperty="height, margin, padding",a.style.transitionDuration=t+"ms",a.style.height=o+"px",a.style.removeProperty("padding-top"),a.style.removeProperty("padding-bottom"),a.style.removeProperty("margin-top"),a.style.removeProperty("margin-bottom"),window.setTimeout(()=>{a.style.removeProperty("height"),a.style.removeProperty("overflow"),a.style.removeProperty("transition-duration"),a.style.removeProperty("transition-property"),n()},t)}},slideToggle=(e,a=500,t=()=>{})=>("none"===window.getComputedStyle(e).display?slideDown:slideUp)(e,a,t);var global={};function _min(e,a,t,n,o){return e<a||t<a?t<e?t+1:e+1:n===o?a:a+1}"undefined"!=typeof window&&(global=window),global.state={dataVersion:0,memoryIsOpen:!1,menuIsOpen:!1,papers:{},papersList:[],paperTags:new Set,pdfTitleFn:null,showFavorites:!1,sortedPapers:[],sortKey:"",papersReady:!1,menu:{},files:{}},global.descendingSortKeys=["addDate","count","lastOpenDate","favoriteDate"],global.select2Options={placeholder:"Tag paper",maximumSelectionLength:5,allowClear:!0,tags:!0,tokenSeparators:[","," "]},global.menuCheckNames=["checkBib","checkMd","checkDownload","checkPdfTitle","checkFeedback","checkDarkMode","checkDirectOpen","checkStore","checkScirate","checkOfficialRepos","checkPreferPdf"],global.menuCheckDefaultFalse=["checkDarkMode","checkDirectOpen","checkStore","checkScirate","checkOfficialRepos"],global.menuStorageKeys=[...global.menuCheckNames,"pdfTitleFn"],global.knownPaperPages={arxiv:["arxiv.org/abs/","arxiv.org/pdf/","scirate.com/arxiv/"],neurips:["neurips.cc/paper/","nips.cc/paper/"],cvf:["openaccess.thecvf.com/content"],openreview:["openreview.net/forum","openreview.net/pdf"],biorxiv:["biorxiv.org/content"],pmlr:["proceedings.mlr.press/"],acl:["aclanthology.org/"],pnas:["pnas.org/content/","pnas.org/doi/"],nature:["nature.com/articles/"],acs:["https://pubs.acs.org/doi/"],iop:["iopscience.iop.org/article/"]},global.overrideORConfs={"robot-learning":"CoRL",ijcai:"IJCAI"},global.overridePMLRConfs={"Conference on Learning Theory":"CoLT","International Conference on Machine Learning":"ICML","Conference on Uncertainty in Artificial Intelligence":"UAI","Conference on Robot Learning":"CoRL","International Conference on Artificial Intelligence and Statistics":"AISTATS","International Conference on Algorithmic Learning Theory":"ALT"},global.overrideDBLPVenues={"J. Mach. Learn. Res.":"JMLR"},global.fuzzyTitleMatchMinDist=4,global.defaultTitleFunctionCode=`(paper) => {
 const title = paper.title.replaceAll("\\n", '');
 const id = paper.id;
 let name = \`\${title} - \${id}\`;
 name = name.replaceAll(":", " ").replace(/\\s\\s+/g, " ");
 return name
};`,global.storeReadme="/!\\ Warning: This folder has been created automatically by your PaperMemory browser extension. /!\\ It has to stay in your downloads for PaperMemory to be able to access your papers. /!\\ To be able to open files from this folder instead of re-downloading them, PaperMemory will match their titles and downloaded urls. /!\\ If you change the default title function in the Advanced Options and do not include a paper's title in the file name, PaperMemory may not be able to open the file and will instead open the pdf url.",global.englishStopWords=new Set([["i","me","my","myself","we","our","ours","ourselves","you","your","yours","yourself","yourselves","he","him","his","himself","she","her","hers","herself","it","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","should","now"]]),global.journalAbbreviations={"infect dis poverty":"Infectious diseases of poverty","emerg microbes infect":"Emerging microbes and infections","front microbiol":"Frontiers in microbiology","front cell infect microbiol":"Frontiers in Cellular and Infection Microbiology","chin j acad radiol":"Chinese journal of academic radiology","clin cosmet investig dermatol":"Clinical Cosmetic and Investigational Dermatology","infect dis obstet gynecol":"Infectious Diseases in Obstetrics and Gynecology","bmc dermatol":"BMC dermatology","j invest dermatol":"Journal of Investigative Dermatology","exp dermatol":"Experimental Dermatology","br j dermatol":"British Journal of Dermatology","j diabetes res":"Journal of Diabetes Research","arch dermatol res":"Archives of Dermatological Research","j am acad dermatol":"Journal of the American Academy of Dermatology",lancet:"The Lancet","clin dermatol":"Clinics in Dermatology","indian j obstet gynecol res":"Indian Journal of Obstetrics and Gynecology Research","indian j med res":"Indian Journal of Medical Research","am j clin dermatol":"American Journal of Clinical Dermatology","j dermatol sci":"Journal of Dermatological Science","indian j clin exp dermatol":"Indian Journal of Clinical and Experimental Dermatology","panacea j med sci":"Panacea Journal of Medical Sciences","indian j med sci":"Indian Journal of Medical Sciences","clin exp dermatol":"Clinical and Experimental Dermatology","diabetol int":"Diabetology international","indian j community med":"Indian Journal of Community Medicine","clin dermatol rev":"Clinical Dermatology Review","indian dermatol online j":"Indian Dermatology Online Journal","mvp j med sci":"MVP Journal of Medical Sciences","indian j dermatol":"Indian Journal of Dermatology","am j nurs":"American journal of nursing","indian j dermatopathol diagn dermatol":"Indian Journal of Dermatopathology and Diagnostic Dermatology","j neurosci":"Journal of neuroscience","j food sci":"Journal of Food Science","cardiovasc diabetol":"Cardiovascular Diabetology","j med case rep":"Journal of medical case reports","clin diabetes endocrinol":"Clinical Diabetes and Endocrinology","j pediatr neurosci":"Journal of Pediatric Neurosciences","j diabetes investig":"Journal of diabetes investigation","world j diabetes":"World journal of diabetes","j public health":"Journal of Public Health","int j nanomed":"International Journal of Nanomedicine","nutr diabetes":"Nutrition and Diabetes","mol cancer":"Molecular Cancer","indian j psychiatry":"Indian Journal of Psychiatry","indian j microbiol res":"Indian Journal of Microbiology Research","indian j orthop surg":"Indian Journal Of Orthopaedics Surgery","indian j microbiol":"Indian journal of microbiology","afr j paediatr surg":"African Journal of Paediatric Surgery","ann pediatr card":"Annals of Pediatric Cardiology","int j curr microbiol appl sci":"International Journal of Current Microbiology and Applied Sciences","dermatol sin":"Dermatologica Sinica","am j surg":"The American Journal of Surgery","j am coll surg":"Journal of the American College of Surgeons","indian j anaesth":"Indian Journal of Anaesthesia","gen surg j":"General Surgery Journals","indian j nephrol":"Indian Journal of Nephrology","int j surg":"International Journal of Surgery","indian j ophthalmol":"Indian Journal of Ophthalmology","surg res pract":"Surgery Research and Practice","indian j orthop":"Indian Journal of Orthopaedics","clin surg":"Clinics in Surgery","can j infect dis med microbiol":"Canadian Journal of Infectious Diseases and Medical Microbiology","s afr j obstet gynaecol":"South African Journal of Obstetrics and Gynaecology","int j nephrol renovascular dis":"International Journal of Nephrology and Renovascular Disease","nepal j obstet gynecol":"Nepal Journal of Obstetrics and Gynaecology","indian j clin exp ophthalmol":"Indian Journal Of Clinical And Experimental Ophthalmology","indian j clin anaesth":"Indian Journal Of Clinical Anaesthesia","indian j pathol oncol":"Indian Journal Of Pathology And Oncology","indian j comm health":"Indian Journal of Community Health","j pediatr crit care":"Journal Of Pediatric Critical Care","j pathol clin res":"Journal of pathology Clinical research","int j mycobacteriol":"International journal of mycobacteriology","int j res dermatol":"International Journal of Research in Dermatology","j am soc cytopathol":"Journal of the American Society of Cytopathology","int j trop dis health":"International Journal of tropical disease and Health","j emerg med":"The Journal of Emergency Medicine","int j med paediatr oncol":"IP International Journal of Medical Paediatrics and Oncology","j spine surg":"Journal of Spinal Surgery","indian j pediatr":"Indian Journal of Pediatrics","int j anat radiol surg":"International Journal of Anatomy Radiology and Surgery","indian j public health":"indian journal of public health","int j dermatopathol surg":"International Journal of Dermatopathology and Surgery","j cancer tumor int":"Journal of Cancer and Tumor International","anil aggrawals internet j forensic med toxicol":"Anil Aggrawals Internet Journal of Forensic Medicine and Toxicology","acad pathol":"Academic Pathology","eur j plant pathol":"European journal of plant pathology","acad pediatr":"Academic Pediatrics","int j biol macromol":"International Journal of Biological Macromolecules","donald sch j ultrasound obstetrics gynecology":"Donald School Journal of Ultrasound in Obstetrics and Gynecology","indian j med forensic med toxicol":"Indian Journal of Forensic Medicine and Toxicology","j pathol inform":"Journal of Pathology Informatics","indian j comp microbiol immunol infect dis":"Indian Journal of Comparative Microbiology Immunology and Infectious Diseases","int j res orthop":"International Journal Of Research In Orthopaedics","biomed res int":"Biomed research international","orthop res rev":"Orthopedic Research and Reviews","int j orthop rheumatol":"IP International Journal of Orthopaedic Rheumatology","indian pediatr":"Indian Pediatrics","int j pediatr":"International Journal of Pediatrics","indian j pain":"Indian Journal of Pain","indian j public health res dev":"Indian Journal of Public Health Research And Development","j pure appl microbiol":"Journal of Pure and Applied Microbiology","int j contemp med res":"International Journal of Contemporary Medical Research","taiwan j psychiatry":"Taiwanese Society of Psychiatry","int j indian psychol":"The International Journal of Indian Psychology","int j anesth anesth":"International Journal of Anesthetics and Anesthesiology","indian j child health":"Indian Journal of Child Health","j clin anesth":"Journal of Clinical Anesthesia","lancet child adolesc health":"The lancet child and adolescent health","saudi j anaesth":"Saudi Journal of Anaesthesia","j pediatr":"The Journal of Pediatrics","j anaesthesiol clin pharmacol":"Journal of anaesthesiology clinical pharmacology","j gynecol surg":"Journal of Gynecologic Surgery","aesthetic surg j":"Aesthetic Surgery Journal","br j anaesth":"British Journal of Anaesthesia","j anesth clin res":"Journal of Anesthesia and Clinical Research","best pract res clin anaesthesiol":"Best Practice and Research in Clinical Anaesthesiology","j ophthalmol":"Journal of Ophthalmology","ophthalmol retina":"Ophthalmology Retina","turk j ophthalmol":"Turkish journal of ophthalmology","indian j pathol microbiol":"Indian Journal of Pathology and Microbiology","ann gastroenterol dig disord":"Annals of Gastroenterology and Digestive Disorders","j can assoc gastroenterol":"Journal of the Canadian Association of Gastroenterology","j clin gynaecol obstet":"Journal of Clinical Gynecology and Obstetrics","ann saudi med":"Annals of Saudi Medicine","j adv res":"Journal of advanced research","j bone miner res":"Journal of bone and mineral research","j bone jt surg":"The Journal of Bone and Joint Surgery","curr opin gynecol obstet":"Current Opinion in Gynecology and Obstetrics","indian j anat":"Indian Journal of Anatomy","integr gynecol obstet j":"Integrative gynecology and obstetrics journal","indian j clin anat physiol":"Indian Journal of Clinical Anatomy and Physiology","ann anat":"Annals of Anatomy","j orthop educ":"Journal of orthopedic education","j ayurveda integr med":"Journal of Ayurveda and integrative medicine",ayu:"AYU An International Quarterly Journal of Research in Ayurveda","am j pathol":"American Journal of Pathology","anal cell pathol":"Analytical Cellular Pathology","int j ayurveda pharma res":"International Journal of Ayurveda and Pharma Research",ayushdhara:"Ayushdhara","n engl j med":"The New England Journal of Medicine","int j pathol clin res":"International Journal of Pathology and Clinical Research","ann med physiol":"Annals of Medical Physiology","case rep orthop":"Case Reports in Orthopedics","j orthop case rep":"Journal of Orthopaedic Case Reports","int j womens health":"International Journal of Womens Health","indones j soc obstet gynecol":"Indonesian Journal of Social Obstetrics and Gynecology","am j obstet gynecol":"American Journal of Obstetrics and Gynecology","acad forensic pathol":"Academic forensic pathology","acta orthop":"Acta Orthopaedica","aims microbiol":"AIMS microbiology","anatol j cardiol":"Anatolian Journal of Cardiology","indian j pathol res pract":"indian journal of pathology research and practice","can j cardiol":"Canadian journal of cardiology","cardiol res":"Cardiology Research","j paediatr nurs sci":"IP Journal of Paediatrics and Nursing Science","j diagn pathol oncol":"IP Journal of Diagnostic Pathology and Oncology","j orthop":"Journal of Orthopaedics","am j surg pathol":"The american journal of surgical pathology","j pathol":"The Journal of pathology","dev psychopathol":"Development and Psychopathology","mod pathol":"Modern pathology","case rep rheumatol":"Case Reports in Rheumatology","brain pathol":"Brain pathology","am j clin pathol":"American Journal of Clinical Pathology","j clin pathol":"Journal of clinical pathology","j public health res":"Journal of public health research","am j public health":"American Journal of Public Health","bmc public health":"BMC public health","public health rep":"Public Health Reports","eur j public health":"European Journal of Public Health","j microsc ultrastruct":"Journal of Microscopy and Ultrastructure","nat microbiol":"Nature microbiology","jama ophthalmol":"JAMA Ophthalmology","int j med sci clin invent":"International Journal of Medical Science and Clinical invention","am j ophthalmol":"American Journal of Ophthalmology","br j ophthalmol":"British Journal of Ophthalmology","surv ophthalmol":"Survey of Ophthalmology","pan asian j obstet gynecol":"Pan Asian Journal of Obstetrics and Gynecology","am j psychiatry":"The American Journal of Psychiatry","gen psychiatr":"General psychiatry","telangana j psychiatry":"Telangana Journal of Psychiatry","iran j neurol":"Iranian journal of neurology","world j surg":"World Journal of Surgery","j otorhinolaryngol allied sci":"IP Journal of Otorhinolaryngology and Allied Science","ann natl acad med sci":"Annals of National Academy of Medical Sciences","blde univ j health sciences":"Blde University Journal of Health Sciences","arch med health sci":"Archives of Medicine and Health Sciences","jmir pediatr parent":"JMIR pediatrics and parenting","j pediatr pediatr med":"Journal of pediatrics and pediatric medicine","pediatr qual saf":"Pediatric quality and safety","tuberc res treat":"Tuberculosis Research and Treatment","compr child adolesc nurs":"Comprehensive child and adolescent nursing","curr treat options pediatr":"Current treatment options in pediatrics","j diabetol":"Journal of Diabetology","j pediatr neonatal care":"Journal of pediatrics and neonatal care","int j contemp pediatr":"International journal of contemporary pediatrics","child neurol open":"Child neurology open","mol cell pediatr":"Molecular and cellular pediatrics","int j ophthalmol":"International Journal of Ophthalmology","j dent spec":"Journal of Dental Specialities","j dent":"Journal of Dentistry","jpn dent sci rev":"Japanese Dental Science Review","indian j dent res":"Indian Journal of Dental Research","indian j dent":"Indian Journal of Dentistry","indian j multidiscip dent":"Indian Journal of Multidisciplinary Dentistry","br dent j":"British Dental Journal","j am dent assoc":"Journal of the american dental association","ann maxillofac surg":"Annals of Maxillofacial Surgery","dent res j":"Isfahan University of Medical Sciences","int dent j stud res":"International Dental Journal of Student Research","j contemp dent pract":"The Journal of Contemporary Dental Practice","j endod":"Journal of Endodontics","apos trends orthod":"APOS Trends in Orthodontics","indian j conserv endod":"IP Indian Journal of Conservative and Endodontics","int j maxillofac imaging":"IP International Journal of Maxillofacial Imaging","int j oral health dent":"International Journal of Oral Health Dentistry","j islamabad med dent college":"Journal of Islamabad Medical and Dental College","world j dentistry":"World Journal of Dentistry","j clin periodontol":"Journal of Clinical Periodontology","j conserv dent":"Journal of conservative dentistry","case rep dent":"Case Reports in Dentistry","oral health dent manag":"Oral health and dental management","int j appl dent sci":"International Journal of Applied Dental Sciences","ann dent sci oral biol":"Annals of Dental Science and Oral Biology","j dent oral biol":"Journal of dentistry and oral biology","j oral biol craniofac res":"Journal of oral biology and craniofacial research","j oral biosci":"Journal of oral biosciences","j oral microbiol":"Journal of Oral Microbiology","iran endod j":"Iranian Endodontic Journal","dental press j orthod":"Dental Press Journal of Orthodontics","j orofac sci":"Journal of Orofacial Sciences","contemp clin dent":"Contemporary Clinical Dentistry","clin oral implants res":"Clinical Oral Implants Research","j restor dent":"Journal of Restorative Dentistry","j esthet restor dent":"Journal of Esthetic and Restorative Dentistry","restor dent endod":"Restorative Dentistry and Endodontics","int j prosthodont endod":"International Journal of Prosthodontics and Restorative Dentistry","ann prosthodont restor dent":"Annals of Prosthodontics and Restorative Dentistry","indian j dent sci":"Indian Journal of Dental Sciences","j indian soc periodontol":"Journal of Indian Society of Periodontology","indian j dent educ":"Indian Journal of Dental Education","sys rev pharm":"Systematic Reviews in Pharmacy","indian j pharm pharmacol":"Indian Journal Of Pharmacy And Pharmacology","indian j pharm sci":"Indian journal of pharmaceutical sciences","int j pharm chem anal":"International Journal Of Pharmaceutical Chemistry And Analysis","ann afr med":"Annals of African Medicine","indian j pharmacol":"Indian Journal of Pharmacology","indian j psychol med":"Indian Journal of Psychological Medicine","j pharm biomed anal":"Journal of pharmaceutical and biomedical analysis","j young pharm":"Journal of Young Pharmacists","int j pharm pharm sci":"International Journal of Pharmacy and Pharmaceutical Sciences","asian j pharm clin res":"The Asian Journal of Pharmaceutical and clinical research","j oncol pract":"Journal of Oncology Practice","j forensic leg med":"Journal of Forensic and Legal Medicine","j forensic med":"Journal of Forensic Medicine","int j forensic med toxicol sci":"IP International Journal of Forensic Medicine and Toxicological Sciences","am j forensic med pathol":"American journal of forensic medicine and pathology","int j med toxicol forensic med":"International Journal of Medical Toxicology and Forensic Medicine","bangladesh j pharmacol":"Bangladesh Journal of Pharmacology","j pharmacol pharmacother":"Journal of Pharmacology and Pharmacotherapeutics","phcog rev":"Pharmacognosy Reviews","j med pharm allied sci":"Journal of medical pharmaceutical and allied sciences","j pharm biol sci":"Journal Of Pharmaceutical And Biological Sciences","pharm chem j":"Pharmaceutical Chemistry Journal","int j pharm pharm res":"International Journal of Pharmacy and Pharmaceutical Research","am j med":"The american journal of medicine","j am coll clin pharm":"Journal of the American College of Clinical Pharmacy","pharm technol hosp pharm":"Pharmaceutical technology in hospital pharmacy","sustain chem pharm":"Sustainable chemistry and pharmacy","asian j pharm pharmacol":"Asian journal of pharmacy and pharmacology","j pharm pharm":"Journal of pharmacy and pharmaceutics","j pharm pharm sci":"Journal of Pharmacy and Pharmaceutical Sciences","pharm pharmacol int j":"Pharmacy and pharmacology international journal","j manag care spec pharm":"Journal of managed care and specialty pharmacy","soj pharm pharm sci":"SOJ pharmacy and pharmaceutical sciences","j pharm pharmacogn res":"Journal of pharmacy and pharmacognosy research","j pharm policy pract":"Journal of pharmaceutical policy and practice","world j pharm pharm sci":"World journal of pharmacy and pharmaceutical sciences","j res pharm pract":"Journal of research in pharmacy practice","pharm pat anal":"Pharmaceutical patent analyst","biomed pharmacol j":"Biomedical and Pharmacology Journal","acta med marisiensis":"Acta medica marisiensis","int j clin pharm":"International journal of clinical pharmacy","int j pharma bio sci":"International Journal of Pharma and Bio Sciences","natl j physiol pharm pharmacol":"National journal of physiology pharmacy and pharmacology","arch pharm pract":"Archives of pharmacy practice","int rev comput softw":"International Review on Computers and Software",softwarex:"SoftwareX","j big data":"Journal of Big Data","comput struct biotechnol j":"Computational and Structural Biotechnology Journal","j mach learn res":"JMLR","peerj comput sci":"PeerJ Computer Science","j comput des eng":"Journal of Computational Design and Engineering","j ambient intell humaniz comput":"Journal of ambient intelligence and humanized computing","int j artif intell":"International Journal of Artificial Intelligence","j theor appl comput sci":"Journal of theoretical and applied computer science","acm comput surv":"ACM Computing Surveys","int j adv comput sci appl":"International Journal of Advanced Computer Science and Applications","int j mach learn comput":"International journal of machine learning and computing","procedia comput sci":"Procedia computer science","npj quantum inf":"NPJ Quantum Information","int j comput intell syst":"International Journal of Computational Intelligence Systems","ieee trans pattern anal mach intell":"IEEE Transactions on Pattern Analysis and Machine Intelligence","ieee trans comput":"IEEE Transactions on Computers","j acm":"Journal of the ACM","ieee commun surv tutor":"IEEE Communications Surveys and Tutorials","int j data sci anal":"International Journal of Data Science and Analytics","int j comput technol":"International journal of computers and technology","big data soc":"Big Data and Society","adv hum comput interact":"Advances in Human Computer Interaction","australas j educ technol":"Australasian Journal of Educational Technology","indian j law hum behav":"Indian Journal of Law and Human Behaviour","int j soc welf manage":"International Journal Of Social Welfare And Management","j nanotechnol":"Journal of nanotechnology","vietnam j sci technol":"Vietnam journal of science and technology","j mater sci":"Journal of Materials Science","mater res express":"Materials research express","j mater sci mater electron":"Journal of Materials Science Materials in Electronics","nat mater":"Nature Materials","adv mater":"Advanced Materials","mater today":"Materials Today","annu rev mater res":"Annual Review of Materials Research","acs appl mater interfaces":"ACS Applied Materials and Interfaces","adv mat res":"Advanced Materials Research","adv mater interfaces":"Advanced materials interfaces","iete j res":"IETE journal of research","j environ chem eng":"Journal of Environmental Chemical Engineering","int j eng adv technol":"International Journal of Engineering and Advanced Technology","arab j sci eng":"Arabian journal for science and engineering","j build perform simul":"International Journal of Building Performance Simulation","int j eng res appl":"International journal of engineering research and applications","eng j":"Engineering Journal","j eng res":"The Journal of Engineering Research","int j eng res":"International Journal of Engineering Research","int j recent technol eng":"International Journal of Recent Technology and Engineering","eng sci technol int j":"Engineering science and technology an international journal","adbu j eng technol":"ADBU Journal of Engineering Technology","adv electron forum":"Advanced Engineering Forum","curr eng j":"Current Biochemical Engineering","int j adv eng sci appl math":"International Journal of Advances in Engineering Sciences and Applied Mathematics","int res j eng technol":"International Research Journal of Engineering and Technology","j constr manag":"Journal of Construction Management","polym eng sci":"Polymer engineering and science","adv phys":"Advances in Physics","int j electrochem":"International Journal of Electrochemistry","bulg j phys":"Bulgarian Journal of Physics","adv condens matter phys":"Advances in Condensed Matter Physics","open access j med aromat plants":"Open Access Journal of Medicinal and Aromatic Plants","hepatol int":"Hepatology International",phytomedicine:"Phytomedicine International Journal of Phytotherapy and Phytopharmacology","indian j gastroenterol":"Indian Journal of Gastroenterology","antioxid redox signal":"Antioxidants and Redox Signaling","j chem educ":"Journal of Chemical Education","j org chem":"Journal of Organic Chemistry","j biol chem":"Journal of biological chemistry","bmc chem":"BMC chemistry","indian j adv chem sci":"Indian Journal of Advances in Chemical Science","asian j chem":"Asian Journal of Chemistry","j chem sci":"Journal of Chemical Sciences","res j chem sci":"Research Journal of Chemical Sciences","j chem":"Journal of Chemistry","orient j chem":"Oriental Journal of Chemistry","new j chem":"New journal of chemistry","anal chem lett":"Analytical Chemistry Letters","am j transplant":"American Journal of Transplantation","indian j surg":"Indian journal of surgery","jama surg":"JAMA Surgery","ind j agric bus":"Indian Journal of Agriculture Business","acta agric scand a anim sci":"Acta Agriculturae Scandinavica Section A Animal Science","ind j agric biochem":"Indian Journal of Agricultural Biochemistry","indian j agric res":"Indian Journal of Agricultural Research","indian j agron":"Indian Journal of Agronomy","physiol mol plant pathol":"Physiological and Molecular Plant Pathology","indian j genet plant breed":"Indian Journal of Genetics and Plant Breeding","indian j agr sci":"indian journal of agricultural sciences","j agric econ":"journal of agricultural economics","j agron indones":"Jurnal Agronomi Indonesia","int j agric sci":"International Journal of Agricultural Sciences","open agric j":"The Open Agriculture Journal","acta fytotech zootech":"Acta Fytotechnica et Zootechnica","j agric nat resour":"Journal of Agriculture and Natural Resources","j nepal agric res counc":"Journal of Nepal Agricultural Research Council","adv sci lett":"Advanced Science Letters","adv agric":"Advances in Agriculture","asian j agric dev":"Asian Journal of Agriculture and Development","asian j agric food sci":"Asian journal of agriculture and food science","int j agric innov res":"International journal of agriculture innovations and research","j integr agric":"Journal of integrative agriculture","agric human values":"Agriculture and human values","front agric china":"Frontiers of Agriculture in China","j exp biol agric sci":"Journal of Experimental Biology and Agricultural Sciences","j community health manag":"The Journal of Community Health Management","j patient saf risk manag":"Journal of patient safety and risk management","perspect public manag gov":"Perspectives on public management and governance","j manag res anal":"Journal Of Management Research And Analysis","acad manag learn educ":"Academy of Management Learning and Education","j bus res":"Journal of Business Research","acad manage j":"Academy of Management Journal","acad manage rev":"Academy of Management Review","account organ soc":"Accounting Organizations and Society","am econ rev":"The American Economic Review","j int bus stud":"Journal of International Business Studies","j int econ":"Journal of International Economics","j manage":"Journal of management","aims int j manag":"AIMS International Journal of Management","int j bus manag":"International Journal of Business and Management","eur manag j":"European Management Journal","eur j manag":"European Journal of Management","eur j int manag":"European Journal of International Management","":"Advances in Statistical Climatology Meteorology and Oceanography","int interdiscip res j":"International interdisciplinary research journal","j anim sci":"Journal of Animal Science","anim nutr technology":"Animal Nutrition and Feed Technology","j anim res":"Journal of Animal Research","anim prod sci":"Animal Production Science","asian australas j anim sci":"Asian Australasian journal of animal sciences","annu rev stat appl":"Annual review of statistics and its application","ann math":"Annals of mathematics","am stat":"The American Statistician","aust n z j stat":"Australian and New Zealand journal of statistics","j stat softw":"Journal of statistical software","int j sci technol res":"International Journal of Scientific and Technology Research","int j mod trends sci technol":"International Journal for Modern Trends in Science and Technology","int j sci res eng dev":"International Journal of Scientific Research and Engineering Development","indian j sci technol":"Indian Journal of Science and Technology","indian j biotechnol":"Indian journal of biotechnology","east asian sci technol soc":"East Asian science technology and society","east asian sci technol med":"East Asian science technology and medicine","sci technol adv mate":"Science and technology of advanced materials","j mar sci technol":"Journal of Marine Science and Technology","open access j sci technol":"Open Access Journal of Science and Technology","sci technol stud":"Science and Technology Studies","j soc sci":"Journal of Social Sciences","mediterr j soc sci":"Mediterranean journal of social sciences","j progress res soc sci":"Journal of progressive research in social sciences",rsf:"The Russell Sage Foundation journal of the social sciences","j stud soc sci":"Journal of studies in social sciences","j methods meas soc sci":"Journal of methods and measurement in the social sciences","j rural soc sci":"Journal of rural social sciences",methodology:"European journal of research methods for the behavioral and social sciences","pak j life soc sci":"Pakistan journal of life and social sciences","am j islam soc sci":"The American journal of Islamic social sciences","soc sci china":"Social sciences in China","pak soc sci rev":"Pakistan social sciences review","acta univ sapientiae econ bus":"Acta Universitatis Sapientiae Economics and Business","adv soc work":"Advances in Social Work","int j soc sci humanity stud":"International Journal of Social Sciences and Humanity Studies","int j humanit soc sci":"International Journal of Humanities and Social Science","am j bus":"American Journal of Business","int j soc sci stud":"International Journal of Social Science Studies","ann econ financ":"Annals of Financial Economics","soc sci j":"The Social Science Journal","asia pac j public adm":"Asia Pacific Journal of Public Administration","am j sociol":"American Journal of Sociology","asia pac j risk insur":"Asia Pacific Journal of Risk and Insurance","chin j sociol":"Chinese journal of sociology","aust intellect prop j":"Australian Intellectual Property Journal","am j cult sociol":"American Journal of Cultural Sociology","anthropol j food":"Anthropology of Food","adv appl sociol":"Advances in applied sociology","asian assoc open univ j":"Asian Association of Open Universities Journal","j appl soc sci":"Journal of applied social science","asian j bus ethics":"Asian Journal of Business Ethics","adv j soc sci":"Advanced Journal of Social Science","int j soc educ sci":"International Journal on Social and Education Sciences","int j yoga":"International Journal of Yoga","indian j anc med yoga":"Indian Journal of Ancient Medicine and Yoga","j yoga phys ther":"Journal of yoga and physical therapy","int j yoga therap":"International journal of yoga therapy","nat biotechnol":"Nature Biotechnology","trends biotechnol":"Trends in biotechnology","biotechnol adv":"Biotechnology Advances","j appl biol biotechnol":"Journal of Applied Biology and Biotechnology","int j biotechnol":"International journal of biotechnology","pak j bot":"Pakistan Journal of Botany","ann bot":"Annals of Botany","aquat bot":"Aquatic Botany","aust j bot":"Australian Journal of Botany","aust syst bot":"Australian Systematic Botany","bot lett":"Botany letters","curr protoc plant biol":"Current protocols in plant biology","plant biotechnol j":"Plant Biotechnology Journal","curr trends biotechnol pharm":"Current Trends in Biotechnology and Pharmacy","j plant sci res":"Journal of Plant Science and Research","int j glob sci res":"International Journal of Global Science Research","j clean prod":"Journal of cleaner production","nat commun":"Nature Communications","j environ sci":"Journal of Environmental Sciences","environ anal health toxicol":"Environmental analysis health and toxicology","curr opin environ sci health":"Current Opinion in Environmental Science and Health","appl ecol environ sci":"Applied Ecology and Environmental Sciences","adv environ res":"Advances in Environment Research","nat environ pollut technol":"Nature Environment and Pollution Technology","j assoc environ resour econ":"Journal of the Association of Environmental and Resource Economists","int j sci res":"International journal of scientific research","adv appl math sci":"Advances and Applications in Mathematical Sciences","aims mol sci":"AIMS Molecular Science","sci rep":"Scientific Reports","acta ger":"Acta Germanica",amphora:"Amphora","antennae j nat vis culture":"Antennae The Journal of Nature in Visual Culture","art market":"Arts and the Market","archaeol int":"Archaeology International","iafor j arts humanit":"IAFOR Journal of Arts and Humanities","iis univ j arts":"IIS University Journal of Arts","j lang discrimination":"Journal of Language and Discrimination","int crit theor":"International Critical Thought","int j comp lit translat stud":"International Journal of Comparative Literature and Translation Studies","iafor j ethics religion philos":"IAFOR Journal of Ethics Religion and Philosophy","between species":"Between the Species","comp philos":"Comparative Philosophy","j pop telev":"Journal of Popular Television","art public sphere":"Art and the Public Sphere","environ philos":"Environmental Philosophy","focus ger stud":"Focus on German Studies","ger foreign lang":"German as a Foreign Language","black camera":"Black Camera","life sci soc policy":"Life Sciences Society and Policy","anc sci life":"Ancient Science of Life","annals ayurvedic med":"Annals of Ayurvedic Medicine","arab j math sci":"Arab Journal of Mathematical Sciences","arab j math":"Arabian Journal of Mathematics","albanian j math":"Albanian Journal of Mathematics","indian drugs":"Indian Drugs","int j clin biochem res":"International Journal of Clinical Biochemistry and Research",biochem:"Biochemistry","contemp account res":"Contemporary accounting research","j account res":"Journal of Accounting Research","j account econ":"Journal of Accounting and Economics","biosci biotechnol res asia":"Biosciences Biotechnology Research Asia","j bank financ":"Journal of Banking and Finance","int j bank account finance":"International Journal of Banking Accounting and Finance","indian j bank financ":"Indian Journal of Finance and Banking","int j cent bank":"International journal of central banking","cell tissue bank":"Cell and Tissue Banking","appl finance account":"Applied finance and accounting","j finance":"Journal of Finance","int j orthop sci":"International Journal of Orthopaedics Sciences","food energy secur":"Food and Energy Security","j food drug anal":"Journal of food and drug analysis","j nutr sci":"Journal of nutritional science","j wildl manage":"Journal of Wildlife Management","j bus ethics":"Journal of Business Ethics","j bus anal":"Journal of business analytics","int j nurs stud":"International journal of nursing studies","j nurs educ pract":"Journal of nursing education and practice","adv emerg nurs j":"Advanced emergency nursing journal","ans adv nurs sci":"Advances in Nursing Science","j carcinog":"Journal of Carcinogenesis","j pers soc psychol":"Journal of personality and social psychology","j mol liq":"Journal of Molecular Liquids","malar control elimin":"Malaria control and elimination","malar j":"Malaria Journal","conserv soc":"Conservation and Society"};const levenshtein=(e,a)=>{if(e===a)return 0;var t;e.length>a.length&&(t=e,e=a,a=t);for(var n=e.length,o=a.length;0<n&&e.charCodeAt(n-1)===a.charCodeAt(o-1);)n--,o--;for(var r=0;r<n&&e.charCodeAt(r)===a.charCodeAt(r);)r++;if(o-=r,0===(n-=r)||o<3)return o;for(var i,l,s,c,p,d,u,h,m,f,g,y=0,v=[],b=0;b<n;b++)v.push(b+1),v.push(e.charCodeAt(r+b));for(var j=v.length-1;y<o-3;)for(h=a.charCodeAt(r+(i=y)),m=a.charCodeAt(r+(l=y+1)),f=a.charCodeAt(r+(s=y+2)),g=a.charCodeAt(r+(c=y+3)),p=y+=4,b=0;b<j;b+=2)i=_min(d=v[b],i,l,h,u=v[b+1]),l=_min(i,l,s,m,u),s=_min(l,s,c,f,u),p=_min(s,c,p,g,u),v[b]=p,c=s,s=l,l=i,i=d;for(;y<o;)for(h=a.charCodeAt(r+(i=y)),p=++y,b=0;b<j;b+=2)d=v[b],v[b]=p=_min(d,i,p,h,v[b+1]),i=d;return p};function BibtexParser(){this.months=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],this.notKey=[",","{","}"," ","="],this.pos=0,this.input="",this.entries=new Array,this.currentEntry="",this.setInput=function(e){this.input=e},this.getEntries=function(){return this.entries},this.isWhitespace=function(e){return" "==e||"\r"==e||"\t"==e||"\n"==e},this.match=function(e,a){if(this.skipWhitespace(a=null==a?!0:a),this.input.substring(this.pos,this.pos+e.length)!=e)throw TypeError("Token mismatch: match","expected "+e+", found "+this.input.substring(this.pos));this.pos+=e.length,this.skipWhitespace(a)},this.tryMatch=function(e,a){return this.skipWhitespace(a=null==a?!0:a),this.input.substring(this.pos,this.pos+e.length)==e},this.matchAt=function(){for(;this.input.length>this.pos&&"@"!=this.input[this.pos];)this.pos++;return"@"==this.input[this.pos]},this.skipWhitespace=function(e){for(;this.isWhitespace(this.input[this.pos]);)this.pos++;if("%"==this.input[this.pos]&&1==e){for(;"\n"!=this.input[this.pos];)this.pos++;this.skipWhitespace(e)}},this.value_braces=function(){var e=0;this.match("{",!1);for(var a=this.pos,t=!1;;){if(!t)if("}"==this.input[this.pos]){if(!(0<e)){var n=this.pos;return this.match("}",!1),this.input.substring(a,n)}e--}else if("{"==this.input[this.pos])e++;else if(this.pos>=this.input.length-1)throw TypeError("Unterminated value: value_braces");t="\\"==this.input[this.pos]&&0==t,this.pos++}},this.value_comment=function(){for(var e="",a=0;!this.tryMatch("}",!1)||0!=a;){if(e+=this.input[this.pos],"{"==this.input[this.pos]&&a++,"}"==this.input[this.pos]&&a--,this.pos>=this.input.length-1)throw TypeError("Unterminated value: value_comment",+this.input.substring(start));this.pos++}return e},this.value_quotes=function(){this.match('"',!1);for(var e=this.pos,a=!1;;){if(!a){if('"'==this.input[this.pos]){var t=this.pos;return this.match('"',!1),this.input.substring(e,t)}if(this.pos>=this.input.length-1)throw TypeError("Unterminated value: value_quotes",this.input.substring(e))}a="\\"==this.input[this.pos]&&0==a,this.pos++}},this.single_value=function(){var e=this.pos;if(this.tryMatch("{"))return this.value_braces();if(this.tryMatch('"'))return this.value_quotes();var a=this.key();if(a.match("^[0-9]+$"))return a;if(0<=this.months.indexOf(a.toLowerCase()))return a.toLowerCase();throw"Value expected: single_value"+this.input.substring(e)+" for key: "+a},this.value=function(){var e=[];for(e.push(this.single_value());this.tryMatch("#");)this.match("#"),e.push(this.single_value());return e.join("")},this.key=function(e){for(var a=this.pos;;){if(this.pos>=this.input.length)throw TypeError("Runaway key: key");if(0<=this.notKey.indexOf(this.input[this.pos]))return e&&","!=this.input[this.pos]?(this.pos=a,null):this.input.substring(a,this.pos);this.pos++}},this.key_equals_value=function(){var e=this.key();if(this.tryMatch("=")){this.match("=");var a=this.value();return[e=e.trim(),a]}throw TypeError("Value expected, equals sign missing: key_equals_value",this.input.substring(this.pos))},this.key_value_list=function(){var e=this.key_equals_value();for(this.currentEntry.entryTags={},this.currentEntry.entryTags[e[0]]=e[1];this.tryMatch(",")&&(this.match(","),!this.tryMatch("}"));)e=this.key_equals_value(),this.currentEntry.entryTags[e[0]]=e[1]},this.entry_body=function(e){this.currentEntry={},this.currentEntry.citationKey=this.key(!0),this.currentEntry.entryType=e.substring(1),null!=this.currentEntry.citationKey&&this.match(","),this.key_value_list(),this.entries.push(this.currentEntry)},this.directive=function(){return this.match("@"),"@"+this.key()},this.preamble=function(){this.currentEntry={},this.currentEntry.entryType="PREAMBLE",this.currentEntry.entry=this.value_comment(),this.entries.push(this.currentEntry)},this.comment=function(){this.currentEntry={},this.currentEntry.entryType="COMMENT",this.currentEntry.entry=this.value_comment(),this.entries.push(this.currentEntry)},this.entry=function(e){this.entry_body(e)},this.alernativeCitationKey=function(){this.entries.forEach(function(e){!e.citationKey&&e.entryTags&&(e.citationKey="",e.entryTags.author&&(e.citationKey+=e.entryTags.author.split(",")[0]+=", "),e.citationKey+=e.entryTags.year)})},this.bibtex=function(){for(;this.matchAt();){var e=this.directive();this.match("{"),"@STRING"==e.toUpperCase()?this.string():"@PREAMBLE"==e.toUpperCase()?this.preamble():"@COMMENT"==e.toUpperCase()?this.comment():this.entry(e),this.match("}")}this.alernativeCitationKey()}}const bibtexToObject=e=>{var a=new BibtexParser;a.setInput(e),a.bibtex();a=a.getEntries()[0];return{...a.entryTags,entryType:a.entryType,citationKey:a.citationKey}},bibtexToString=e=>{let a=`@${(e="string"==typeof e?bibtexToObject(e):e).entryType.toLowerCase()}{${e.citationKey},
`;delete e.entryType,delete e.citationKey;var t,n=Math.max(...Object.keys(e).map(e=>e.length));for(const o in e)e.hasOwnProperty(o)&&(t=e[o].replaceAll(/\s+/g," ").trim(),bkey=o+" ".repeat(n-o.length),a+=`	${bkey} = {${t}},
`);return(a.slice(0,-2)+"\n}").replaceAll("\t","  ")},extractBibtexValue=(e,a)=>{const t=bibtexToObject(e);return t.hasOwnProperty(a)?t[a]:""},extractAuthor=e=>extractBibtexValue(e,"author").replaceAll("{","").replaceAll("}","").replaceAll("\\","").split(" and ").map(e=>e.split(", ").reverse().join(" ")).join(" and "),logTrace="undefined"!=typeof LOGTRACE&&LOGTRACE,log=(...e)=>{const a=(new Error).stack;var t=logTrace?"\n\nLog trace:\n"+a.split("\n").slice(2).join("\n"):"";console.log("[PM] ",...e,t)},info=(...e)=>log("%c[PM] "+e.join(" "),"color: #328DD2"),getDisplayId=e=>{var a=e;if((e=e.split("_")[0].split(".")[0]).startsWith("OR-")||(e=e.split("-").slice(0,2).join("-")),global.state.papers.hasOwnProperty(a)){const t=global.state.papers[a];if("nature"===t.source){if(t.note.match(/^Published\ @.+\(\d+\)$/)){const n=t.note.split("@")[1].split("(")[0].trim();e+="-"+n.split(" ").map(e=>e[0].toUpperCase()).join("")}e+="-"+t.year}"acs"===t.source&&(e+="-"+t.year),"iop"===t.source&&(e+="-"+t.year)}return e},isObject=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,isPdfUrl=e=>e.endsWith(".pdf")||e.includes("openreview.net/pdf"),delay=(a,t)=>{let n=0;return(...e)=>{clearTimeout(n),n=setTimeout(a.bind(this,...e),t||0)}},cleanPapers=e=>{let a={...e};return delete a.__dataVersion,a},capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1),firstNonStopLowercase=e=>{let a=e.toLowerCase(),t=a.split(" ").map(e=>e.replace(/[^0-9a-z]/gi,""));e=t.filter(e=>global.englishStopWords.has(e));return(0<e.length?e:t)[0]},fallbackCopyTextToClipboard=e=>{var a=document.createElement("textarea");a.value=e,a.style.top="0",a.style.left="0",a.style.position="fixed",document.body.appendChild(a),a.focus(),a.select();try{var t=document.execCommand("copy")?"successful":"unsuccessful";log("Fallback: Copying text command was "+t)}catch(e){console.error("Fallback: Oops, unable to copy",e)}document.body.removeChild(a)},copyTextToClipboard=e=>{navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{log("Async: Copying to clipboard was successful!")},e=>{console.error("Async: Could not copy text: ",e)}):fallbackCopyTextToClipboard(e)},parseUrl=e=>{var a=document.createElement("a");return a.href=e,a},downloadTextFile=(e,a,t)=>{var n=document.createElement("a");"text/plain"===t?(e=e.replace(/\\n/g,"%0D%0A").replace(/"/g,""),n.download=a,n.href="data:text/plain,"+e):(t=new Blob([e],{type:t}),n.href=URL.createObjectURL(t),n.download=a),n.click()},eventId=e=>e.target.closest(".memory-container").id.split("--")[1],downloadFile=(e,a)=>{var t;window.ActiveXObject?window.ActiveXObject&&document.execCommand&&((t=window.open(e,"_blank")).document.close(),t.document.execCommand("SaveAs",!0,a||e),t.close()):((t=document.createElement("a")).href=e,t.target="_blank",e=e.substring(e.lastIndexOf("/")+1),t.download=a||e,navigator.userAgent.toLowerCase().match(/(ipad|iphone|safari)/)&&navigator.userAgent.search("Chrome")<0?document.location=t.href:(e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),t.dispatchEvent(e),(window.URL||window.webkitURL).revokeObjectURL(t.href)))},hashCode=e=>e.split("").reduce((e,a)=>(e=(e<<5)-e+a.charCodeAt(0))&e,0),parseCVFUrl=e=>{const a=e.replace("https://openaccess.thecvf.com/content","").slice(1).split("/")[0].split("_");let t,n;n=1===a.length?(t=a[0].slice(0,-4),a[0].slice(-4)):(t=a[0].toUpperCase(),a[1]);e=e.split("/").reverse()[0].split(".")[0],e=(hashCode(e)+"").replace("-","").slice(0,8),e=`${t}-${n}_`+e;return{conf:t,year:n,id:e}},cleanBiorxivURL=e=>e=(e=e.replace(".full.pdf","")).match(/\d$/)?e:e.split(".").slice(0,-1).join("."),textareaFocusEnd=e=>{setTimeout(()=>{e.selectionStart=e.selectionEnd=1e4},0)},formatBibtext=e=>{let a=e.trim().split("\n").join("").replace(/\s+=/g," =");var t=a.match(/\ \w+\ ?=\ ?{/g)||[],e=a.match(/,\w+\ ?=\ ?{/g)||[];if(t&&0<t.length)for(const o of t)a=a.replace(o,`
 `+o);if(e&&0<e.length)for(const r of e){var n=r.replace(",","");a=a.replace(r,`,
 `+n)}return"}}"===a.slice(-2)&&(a=a.slice(0,-1)+"\n}"),a.replaceAll("{ ","{").replaceAll(" }","}").replaceAll(" = ","=")},tablerSvg=(e,a,t)=>{switch(a=(a=void 0===a?"":a)&&`id="${a}"`,t=(t=(t=void 0===t?[]:t).filter(e=>e))&&`class="${t.join(" ")}"`,e){case"adjustments":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="6" cy="10" r="2"/><line x1="6" y1="4" x2="6" y2="8"/><line x1="6" y1="12" x2="6" y2="20"/><circle cx="12" cy="16" r="2"/><line x1="12" y1="4" x2="12" y2="14"/><line x1="12" y1="18" x2="12" y2="20"/><circle cx="18" cy="7" r="2"/><line x1="18" y1="4" x2="18" y2="5"/><line x1="18" y1="9" x2="18" y2="20"/></svg>`;case"circle-x":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><path d="M10 10l4 4m0 -4l-4 4"/></svg>`;case"star":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"/></svg>`;case"writing":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"/><path d="M16 7h4"/><path d="M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"/></svg>`;case"file-symlink":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 21v-4a3 3 0 0 1 3 -3h5"/><path d="M9 17l3 -3l-3 -3"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M5 11v-6a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-9.5"/></svg>`;case"link":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"/><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"/></svg>`;case"clipboard-list":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"/><rect x="9" y="3" width="6" height="4" rx="2"/><line x1="9" y1="12" x2="9.01" y2="12"/><line x1="13" y1="12" x2="15" y2="12"/><line x1="9" y1="16" x2="9.01" y2="16"/><line x1="13" y1="16" x2="15" y2="16"/></svg>`;case"archive":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"/><line x1="10" y1="12" x2="14" y2="12"/></svg>`;case"external-link":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 7h-5a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-5"/><line x1="10" y1="14" x2="20" y2="4"/><polyline points="15 4 20 4 20 9"/></svg>`;case"file-download":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4"/><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"/><line x1="12" y1="11" x2="12" y2="17"/><polyline points="9 14 12 17 15 14"/></svg>`;case"cirlce-x":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><path d="M10 10l4 4m0 -4l-4 4"/></svg>`;case"settings":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"/><circle cx="12" cy="12" r="3"/></svg>`;case"messages":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10"/><path d="M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2"/></svg>`;case"vocabulary":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 19h-6a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1h6a2 2 0 0 1 2 2a2 2 0 0 1 2 -2h6a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-6a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2z"/><path d="M12 5v16"/><path d="M7 7h1"/><path d="M7 11h1"/><path d="M16 7h1"/><path d="M16 11h1"/><path d="M16 15h1"/></svg>`;case"database-export":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><ellipse cx="12" cy="6" rx="8" ry="3"/><path d="M4 6v6c0 1.657 3.582 3 8 3a19.84 19.84 0 0 0 3.302 -.267m4.698 -2.733v-6"/><path d="M4 12v6c0 1.599 3.335 2.905 7.538 2.995m8.462 -6.995v-2m-6 7h7m-3 -3l3 3l-3 3"/></svg>`;case"eyeglass":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 4h-2l-3 10"/><path d="M16 4h2l3 10"/><line x1="10" y1="16" x2="14" y2="16"/><path d="M21 16.5a3.5 3.5 0 0 1 -7 0v-2.5h7v2.5"/><path d="M10 16.5a3.5 3.5 0 0 1 -7 0v-2.5h7v2.5"/></svg>`;case"markdown":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="3" y="5" width="18" height="14" rx="2"/><path d="M7 15v-6l2 2l2 -2v6"/><path d="M14 13l2 2l2 -2m-2 2v-6"/></svg>`;case"math-function":return`<svg viewBox="0 0 24 24" ${a} ${t}><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 10h1c1 0 1 1 2.016 3.527c.984 2.473 .984 3.473 1.984 3.473h1"/><path d="M13 17c1.5 0 3 -2 4 -3.5s2.5 -3.5 4 -3.5"/><path d="M3 19c0 1.5 .5 2 2 2s2 -4 3 -9s1.5 -9 3 -9s2 .5 2 2"/><line x1="5" y1="12" x2="11" y2="12"/></svg>`;default:return""}},stringifyError=e=>{const a=chrome.runtime.id;return e.stack.split("\n").map(e=>e.split(" ").map(e=>e.split(a).reverse()[0]).join(" ")).join("<br/>")},arraysIdentical=(e,a)=>{var t=e.length;if(t!=a.length)return!1;for(;t--;)if(e[t]!==a[t])return!1;return!0},parseTags=e=>{let a=Array.from(e.selectedOptions,e=>e.value.trim()).filter(e=>e);return a.sort(),a},getPaperEdits=(e,a)=>{let t,n,o,r;return r=a?(t=val("popup-form-note-textarea--"+e),o=val(document.getElementById("popup-form-note--"+e).querySelector(".form-code-input")),n=parseTags(findEl("popup-item-tags--"+e)),findEl("checkFavorite--"+e).checked):(t=val(findEl(e,"form-note-textarea")),o=val(findEl(e,"form-code-input")),n=parseTags(findEl(e,"memory-item-tags")),hasClass("memory-container--"+e,"favorite")),{note:t,tags:n,codeLink:o,favorite:r}},setFormChangeListener=(e,a)=>{let t,n,o,r;a?(t="#popup-item-tags--"+e.replace(".","\\."),o="popup-form-codeLink--"+e,n="popup-form-note-textarea--"+e,r="checkFavorite--"+e,$(t).on("change",delay(monitorPaperEdits(e,a),300)),addListener(o,"keyup",delay(monitorPaperEdits(e,a),300)),addListener(n,"keyup",delay(monitorPaperEdits(e,a),300)),addListener(r,"change",delay(monitorPaperEdits(e,a),300))):(t=".memory-item-tags",o=".form-code-input",n=".form-note-textarea",addEventToClass(o,"keyup",delay(monitorPaperEdits(e,a),300)),addEventToClass(n,"keyup",delay(monitorPaperEdits(e,a),300)))},monitorPaperEdits=(s,c)=>e=>{void 0===s&&(s=eventId(e));var a=getPaperEdits(s,c),t=global.state.papers[s];let n=!1,o={};for(const l in a){var r=t[l];o[l]=r;var i=a[l];("tags"===l&&!arraysIdentical(r,i)||"tags"!==l&&r!==i)&&(n=!0)}n&&(console.log("Updating",s,c),(c?handlePopupSaveEdits:handleMemorySaveEdits)(s))},cutAuthors=(e,a,t)=>{void 0===a&&(a=140),void 0===t&&(t=", ");let n="";var e=e.split(" and "),o=e[e.length-1];for(const r of e){if(!(5+n.length+t.length+r.length+o.length<a)){n+=" ... "+o;break}n?n+=", "+r:n=r}return n},sendMessageToBackground=e=>new Promise(a=>{chrome.runtime.sendMessage(e,e=>{a(e)})}),getStoredFiles=()=>new Promise(a=>{chrome.downloads.search({filenameRegex:"PaperMemoryStore/.*"},e=>a(e.filter(e=>e.exists&&"complete"===e.state)))}),migrateData=async(t,a,e=!0)=>{if(void 0===t)return chrome.storage.local.set({papers:{__dataVersion:a}}),{papers:{__dataVersion:a},success:!0};var n,o,r,i=t.__dataVersion||-1,l=[];let s={...t};try{if(405<=i)return{papers:t,success:!0};e&&backupData({...t}),delete t.__dataVersion;for(const c in t)i<5&&(info("Applying migration 5"),t[c].hasOwnProperty("bibtex")||(t[c].bibtex="",log("Migrating bibtex for "+c)),t[c].pdfLink.endsWith(".pdf")||(t[c].pdfLink=t[c].pdfLink+".pdf"),t[c].codeLink||(t[c].codeLink=""),t[c].source||(t[c].id.includes("NeurIPS")?t[c].source="neurips":t[c].source="arxiv")),i<208&&(info("Applying migration 0.2.8"),"arxiv"!==t[c].source&&t[c].md.includes("https://arxiv.com/abs/")&&(t[c].md=`[${t[c].title}](${t[c].pdfLink})`),"arxiv"!==t[c].source&&t[c].pdfLink.includes("arxiv.org/pdf/")&&(t[c].source="arxiv"),c.match(/^\d/)&&"arxiv"===t[c].source&&(n="Arxiv-"+c,o={...t[c],id:n},t[n]=o,l.push(c))),i<209&&(info("Applying migration 0.2.9"),t[c].hasOwnProperty("favorite")||(t[c].favorite=!1,t[c].favoriteDate="")),i<210&&(info("Applying migration 0.2.10"),"arxiv"!==t[c].source||(r=t[c].pdfLink.match(/v\d+\.pdf/gi))&&0<r.length&&(t[c].pdfLink=t[c].pdfLink.replace(r[0],".pdf")),t[c].hasOwnProperty("bibtext")&&(t[c].bibtex=t[c].bibtext+"",delete t[c].bibtext)),i<450&&(info("Applying migration 0.4.5"),t[c].hasOwnProperty("venue")||(t[c].venue=await makeVenue(t[c])));return l.forEach((e,a)=>{delete t[e],log("Deleting "+e)}),s={...t},s.__dataVersion=a,e&&chrome.storage.local.set({papers:s},()=>{log("Migrated papers:"),log(s),log("Data version is now "+a)}),{papers:s,success:!0}}catch(e){return log(`Error migrating data from version ${i} to ${a}:`),log(e),{papers:s,success:!1,error:e}}},logStorage=a=>{chrome.storage.local.get(a,e=>{log(e[a])})},getStorage=async t=>new Promise((a,e)=>{chrome.storage.local.get(t,e=>{a("string"==typeof t?e[t]:e)})}),setStorage=async(t,n,o=()=>{})=>new Promise((e,a)=>{chrome.storage.local.set({[t]:n},()=>{o(),e(!0)})}),deletePaperInStorage=async e=>{const a=await getStorage("papers");let t=!1;a.hasOwnProperty(e)&&(t=delete a[e]),t?(setStorage("papers",a),log("Successfully deleted paper",e)):log("Error: no deletion")},getTheme=async()=>{return await getStorage("checkDarkMode")?"dark":"light"},backupData=async t=>{chrome.storage.local.get("papersBackup",({papersBackup:e})=>{void 0===e&&(e={});for(const a of Object.keys(e).map(e=>parseInt(e)).sort((e,a)=>e<a?1:-1).slice(4))delete e[a];e[t.__dataVersion]=t,chrome.storage.local.set({papersBackup:e},()=>{log("Backed up data with version: "+t.__dataVersion)})})};function dateDiffInDays(e,a){e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.floor((a-e)/864e5)}const weeklyBackup=async()=>{let e=await getStorage("weeklyBackups");e=e||{};const a=new Date,t=Object.keys(e).map(e=>new Date(e)).sort();if(0<t.length&&dateDiffInDays(t[t.length-1],a)<7)return;let n={};for(const o of t.reverse().slice(0,5))n[o.toString()]=e[o.toString()];n[a.toString()]=await getStorage("papers"),setStorage("weeklyBackups",n)},getMenu=async()=>{const e=await getStorage(global.menuStorageKeys);let a={};for(const t of global.menuCheckNames)a[t]=!e.hasOwnProperty(t)||e[t];return a},getManifestDataVersion=()=>{const e=chrome.runtime.getManifest();return e.version.split(".").map((e,a)=>parseInt(e)*10**(4-2*a)).reduce((e,a)=>e+a)},versionToSemantic=e=>(major=parseInt(e/1e4,10),e-=1e4*major,minor=parseInt(e/100,10),e-=100*minor,`${major}.${minor}.`+e),validatePaper=(e,a=!0)=>{const t={addDate:{type:"string",desc:"the paper's date of addition to the Memory",default:e=>(new Date).toJSON()},author:{type:"string",desc:"` and `-separated authors `${firstName} ${lastName}`"},bibtex:{type:"string",desc:"BibTex citation with new lines (`\n`)"},code:{type:"object",desc:"the paper's code object as returned by the PapersWithCode API",default:e=>({})},codeLink:{type:"string",desc:"the paper's code link",default:e=>""},count:{type:"number",desc:"the paper's number of visits",default:e=>1},favorite:{type:"boolean",desc:"user wants to star the paper",default:e=>!1},favoriteDate:{type:"string",desc:"date the paper was added as a favorite",default:e=>""},id:{type:"string",desc:"Unique PaperMemory ID"},key:{type:"string",desc:"BibTex citation key",default:e=>"defaultKey_"+e.id},lastOpenDate:{type:"string",desc:"When the paper was last opened",default:e=>(new Date).toJSON()},md:{type:"string",desc:"markdown-formatted string `[${title}](${pdfLink})`",default:e=>`[${e.title}](${e.pdfLink})`},note:{type:"string",desc:"the user's note for this paper",default:e=>""},pdfLink:{type:"string",desc:"the link to the paper's pdf"},source:{type:"string",desc:"the paper's source i.e. where it was added to the memory from"},tags:{type:"array[string]",desc:"the user's tags for this paper",default:e=>[]},venue:{type:"string",desc:"the paper's publication venue",default:e=>""},year:{type:"string",desc:"year of publication"}};let n=[];for(const s in t)if(e.hasOwnProperty(s)){const c=t[s].type;var o,r,i=typeof e[s];c.includes("array")||"object"===c?c.includes("array")?Array.isArray(e[s])?(o=c.split("[")[1].replace("]",""),0<e[s].length&&((r=typeof e[s][0])!==o&&(message=` ${s} should contain ${o} not ${r} (${e.id})`,n.push(message),a&&console.warn(message)))):(message=`${s} should be an array (${e.id})`,n.push(message),a&&console.warn(message)):Object(e[s])!==e[s]&&(message=`${s} should be an object (${e.id})`,n.push(message),a&&console.warn(message)):i!==c&&(message=` ${s} should be of type ${c} not ${i} (${e.id})`,n.push(message),a&&console.warn(message))}else{if(!t[s].default)throw new Error(`Cannot continue, paper is corrupted. Missing mandatory attribute "${s}" in `+e.id);i=t[s].default(e);e[s]=i,message=` Attribute "${s}" absent; will be set to "${JSON.stringify(i)}" (${e.id})`,n.push(message),a&&console.warn(message)}const l=Object.keys(global.knownPaperPages);return l.indexOf(e.source)<0&&(message=`Unknown source ${e.source} (${e.id})`,n.push(message),console.warn(message)),{warnings:n,paper:e}},prepareOverwriteData=async e=>{let a=!0,t="",n="",o;try{e.__dataVersion||(e.__dataVersion=1);var r,i=await migrateData(e,getManifestDataVersion(),!1);if(!i.success)return n="Could not migrate the data before storing it",i.error&&(n+=":<br/>"+stringifyError(i.error)),{success:!1,message:n};o=i.papers;for(const l in o)l.startsWith("__")||(paperWarnings=validatePaper(o[l]).warnings,paperWarnings&&0<paperWarnings.length&&(t+="<br/>"+paperWarnings.join("<br/>")));t&&(r=await getStorage("papers"),setStorage("uploadBackup",r)),a=!1}catch(e){log("prepareOverwriteData error",e),n='<h5 class="errorTitle">/!\\ OverwriteMemoryError:</h5><br>'+stringifyError(e),a=!0}return{success:!a,message:n,warning:t,papersToWrite:o}},isPaper=async(e,a=!1)=>{let t={};for(const o in global.knownPaperPages){var n=global.knownPaperPages[o];t[o]=!1;for(const r of n)e.includes(r)&&(t[o]=!0)}return t.localFile=isKnownLocalFile(e),t.stored=!a&&await findLocalFile(e),t},isKnownURL=async(e,a)=>Object.values(await isPaper(e,a)).some(e=>e),paperToAbs=e=>{const a=e.pdfLink;let t="";switch(e.source){case"arxiv":t="https://arxiv.org/abs/"+e.id.split("-")[1];break;case"neurips":t=a.replace("/file/","/hash/").replace("-Paper.pdf","-Abstract.html");break;case"cvf":t=a.replace("/papers/","/html/").replace(".pdf",".html");break;case"openreview":t=a.replace("/pdf?","/forum?");break;case"biorxiv":t=a.replace(".full.pdf","");break;case"pmlr":t=a.split("/").slice(0,-1).join("/")+".html";break;case"acl":t=a.replace(".pdf","");break;case"pnas":t=a.replace(".full.pdf","").replace("/doi/pdf/","/doi/full/");break;case"nature":t=a.replace(".pdf","");break;case"acs":t=a.replace("pubs.acs.org/doi/pdf/","pubs.acs.org/doi/").split("?")[0];break;case"iop":t=a.split("#")[0].replace(/\/pdf$/,"");break;default:t="https://xkcd.com/1969/"}return t.replace("http://","https://")},paperToPDF=e=>{let a=e.pdfLink;switch(e.source){case"arxiv":a=a.replace("arxiv.org/abs/","arxiv.org/pdf/").replace(/\.pdf$/,"").replace(/v\d+$/gi,""),a+=".pdf";break;case"neurips":a=a.replace("/hash/","/file/").replace("-Abstract.html","-Paper.pdf");break;case"cvf":a=a.replace("/html/","/papers/").replace(".html",".pdf");break;case"openreview":a=a.replace("/forum?","/pdf?");break;case"biorxiv":a=cleanBiorxivURL(a)+".full.pdf";break;case"pmlr":case"acl":case"pnas":break;case"nature":a.endsWith(".pdf")||(a+=".pdf");break;case"iop":a.endsWith("/pdf")||(a+="/pdf");break;case"acs":break;default:a="https://xkcd.com/1969/"}return a.replace("http://","https://")},findLocalFile=async a=>{if("string"==typeof a){let e;try{e=await parseIdFromUrl(a)}catch(e){return new Promise(e=>e(null))}if(!global.state.papers.hasOwnProperty(e))return new Promise(e=>e(null));paper=global.state.papers[e]}else paper=a;a=await getStoredFiles(),a=await matchPapersToFiles({[paper.id]:paper},a),a=Object.values(a);return 1===a.length?a[0]:null},matchPapersToFiles=async(e,a)=>{var t=Object.fromEntries(Object.values(e).map(e=>[e.id,e.title.toLowerCase().replace(/\W/g,"")]));a=a.filter(e=>e.exists&&"complete"===e.state);var n=Object.fromEntries(a.map(e=>[e.id,e.filename.toLowerCase().replace(/\W/g,"")]));let o={};for(const i of a){let a;try{a=await parseIdFromUrl(i.finalUrl),a&&e.hasOwnProperty(a)&&(o[a]=i)}catch(e){a=null}if(!a){const l=n[i.id];var r=Object.entries(t).filter(([,e])=>e.includes(l));1===r.length&&(o[r[0][0]]=i)}}return o},matchAllFilesToPapers=()=>new Promise((a,e)=>{chrome.downloads.search({filenameRegex:"PaperMemoryStore/.*"},async e=>{e=await matchPapersToFiles(cleanPapers(global.state.papers),e);a(e)})}),makeVenue=async e=>{let a="";switch(e.note&&e.note.match(/(accepted|published)\ @\ .+\(?\d{4}\)?/i)&&(a=e.note.split("@")[1].trim().replace(/\(?\d{4}\)?/,"").split("--")[0].trim()),a&&"neurips"===a.toLowerCase()&&(a="NeurIPS"),e.source){case"arxiv":break;case"neurips":a="NeurIPS";break;case"cvf":a=a||(await makeCVFPaper(e.pdfLink)).venue;break;case"openreview":a=a||(await makeOpenReviewPaper(e.pdfLink)).venue;break;case"biorxiv":break;case"pmlr":a=e.conf.split(/\d{4}/)[0];break;case"acl":a=e.conf;break;case"pnas":a="PNAS";break;case"nature":a=a||e.venue;break;case"iop":case"acs":a=e.venue}return a},initState=async(e,a)=>{var t=Date.now();void 0===e&&(e=await getStorage("papers"),log("Time to retrieve stored papers (s): "+(Date.now()-t)/1e3)),global.state.dataVersion=getManifestDataVersion(),global.state.titleFunction=(await getTitleFunction()).titleFunction,weeklyBackup(),e=(await migrateData(e,global.state.dataVersion)).papers,global.state.papers=e,global.state.menu=await getMenu(),a||(global.state.files=await matchAllFilesToPapers(),global.state.papersList=Object.values(cleanPapers(e)),global.state.sortKey="lastOpenDate",global.state.papersReady=!0,sortMemory(),makeTags()),log("State initialization duration (s): "+(Date.now()-t)/1e3)},getExamplePaper=async e=>{var a=await getStorage("papers"),t=Object.keys(a).filter(e=>-1===e.indexOf("__")).reverse();let n=a[t[e=void 0===e?getRandomInt(t.length):e]];return void 0===n&&(n={title:"Dummy title",author:"Cool Author and Great Author and Complicated Name uthor",year:2021,id:"NoneXiv-214324",bibtex:"@Nonesense{}",tags:["t1","t2"],note:"Thispaperdoesnotexist.com"}),n},getTitleFunction=async(code=null)=>{let titleFunction;code=code||await getStorage("titleFunctionCode"),void 0===code&&(code=global.defaultTitleFunctionCode);let errorMessage;try{titleFunction=eval(code)}catch(error){errorMessage="Error parsing the title function: "+error,log("Error parsing the title function. Function string then error:"),log(code),log(error),titleFunction=eval(global.defaultTitleFunctionCode),code=global.defaultTitleFunctionCode}try{const examplePaper=await getExamplePaper(0),result=titleFunction(examplePaper);if("string"!=typeof result)throw new Error(`Result ${result} is not a string`)}catch(error){errorMessage="Error executing the title function: "+error,log("Error testing the user's title function. Function string then error:"),log(code),log(error),titleFunction=eval(global.defaultTitleFunctionCode),code=global.defaultTitleFunctionCode}return{titleFunction:titleFunction,code:code.trim(),errorMessage:errorMessage}},stateTitleFunction=paperOrId=>{let paper=paperOrId;if("string"==typeof paperOrId&&(paper=global.state.papers[paperOrId],void 0===paper))return log("Error in stateTitleFunction: unknown id",paperOrId),"Unknown ID";let name;try{name=global.state.titleFunction(paper)}catch(error){log("Error in stateTitleFunction:",error),name=eval(global.defaultTitleFunctionCode)(paper)}return name.replaceAll("\n"," ").replace(/\s\s+/g," ")},addOrUpdatePaper=async(e,a,o)=>{let r,i,l,s,c;var t=await parseIdFromUrl(e);if(log("id:",t),t&&global.state.papers.hasOwnProperty(t))global.state.papers=updatePaper(global.state.papers,t),r=global.state.papers[t],i=!1;else{if(r=await makePaper(a,e,t),!r)return;global.state.papers[r.id]=r,i=!0}if(!r.codeLink||!r.venue)try{var n={type:"papersWithCode",paper:r,officialReposOnly:o.checkOfficialRepos};const p=await sendMessageToBackground(n);l=p?.url,s=p?.note,c=p?.venue,l&&(console.log("Discovered a code repository from PapersWithCode:",l),global.state.papers[r.id].codeLink=l,p.hasOwnProperty("note")&&delete p.note,global.state.papers[r.id].code=p)}catch(e){log("Error trying to discover a code repository:"),log(e)}return chrome.storage.local.set({papers:global.state.papers},async()=>{let e;var a,t,n;console.log("isNew: ",i),console.log("menu: ",o),i||l?i?(log("Added '"+r.title+"' to your Memory!"),log("paper: ",r),e="Added to your Memory",l&&(e+="<br/><div id='feedback-pwc'>(+ repo from PapersWithCode) </div>"),o&&o.checkFeedback&&feedback(e,r)):(e="Found a code repository on PapersWithCode!",o&&o.checkFeedback&&feedback(e)):log("Updated '"+r.title+"' in your Memory"),r.note&&r.venue||({note:a,venue:t,bibtex:n}=await tryPreprintMatch(r),(a||t||n)&&(r.note||(a?(log("[PM] Updating preprint note to",a),r.note=a):s&&(log("[PM] Updating preprint note to",s),r.note=s)),r.venue||(t?(log("[PM] Updating preprint venue to",t),r.venue=t):c&&(log("[PM] Updating preprint venue to",c),r.venue=c)),n&&(log("[PM] Updating preprint bibtex to",n),r.bibtex=n),global.state.papers[r.id]=r,chrome.storage.local.set({papers:global.state.papers})))}),{paper:r,id:t}},parseIdFromUrl=async a=>{var e=await isPaper(a,!0);if(e.arxiv)return"Arxiv-"+a.match(/\d{4}\.\d{4,5}/g)[0];if(e.neurips)return`NeurIPS-${a.split("/paper/")[1].split("/")[0]}_`+a.split("/").reverse()[0].split("-")[0].slice(0,8);if(e.cvf)return parseCVFUrl(a).id;if(e.openreview){const o=a.match(/id=\w+/)[0].replace("id=","");var t=Object.values(cleanPapers(global.state.papers)).filter(e=>e.id.includes(o))[0];return t&&t.id}if(e.biorxiv){let e=(a=cleanBiorxivURL(a)).split("/").reverse()[0];return e.match(/v\d+$/)&&(e=e.split("v")[0]),"Biorxiv-"+e}if(e.pmlr){const r=a.split("/").reverse()[0].split(".")[0];return`PMLR-${"20"+r.match(/\d+/)[0]}-`+r}if(e.acl){const i=(a=(a=a.replace(".pdf","")).endsWith("/")?a.slice(0,-1):a).split("/").reverse()[0];var n=Object.values(cleanPapers(global.state.papers)).filter(e=>e.id.includes("ACL-")&&e.id.includes(i))[0];return n&&n.id}if(e.pnas){const l=((a=a.replace(".full.pdf","")).endsWith("/")?a.split("/").slice(-2):a.split("/").slice(-1))[0];n=Object.values(cleanPapers(global.state.papers)).filter(e=>e.id.includes("PNAS-")&&e.id.includes(l))[0];return n&&n.id}if(e.nature)return"Nature_"+(a=a.replace(".pdf","").split("#")[0]).split("/").reverse()[0];if(e.acs)return"ACS_"+(a=a.replace("pubs.acs.org/doi/pdf/","pubs.acs.org/doi/").split("?")[0]).split("/doi/")[1].replaceAll(".","").replaceAll("/","");if(e.iop)return"IOPscience_"+(a=a.split("#")[0].replace(/\/pdf$/,"")).split("/article/")[1].replaceAll(".","").replaceAll("/","");if(e.localFile)return e.localFile;throw new Error("unknown paper url")},isKnownLocalFile=e=>{if(!e.startsWith("file://"))return!1;if(!e.endsWith(".pdf"))return!1;const a=decodeURIComponent(e).replace("file://","");var t=Object.entries(global.state.files).filter(([,e])=>e.filename===a);if(0<t.length)return console.log("Found stored"),t[0][0];const n=decodeURIComponent(e.split("/").reverse()[0]).toLowerCase().replace(/\W/g,"");e=Object.values(cleanPapers(global.state.papers)).map(e=>({title:e.title.toLowerCase().replace(/\W/g,""),id:e.id})).filter(e=>n.includes(e.title));return 0!==e.length&&e[0].id},decodeHtml=e=>{var a=document.createElement("textarea");return a.innerHTML=e,a.value},flipAuthor=e=>e.split(", ").reverse().join(" "),flipAndAuthors=e=>e.split(" and ").map(flipAuthor).join(" and "),fetchArxivXML=async e=>{e=e.replace("Arxiv-","");return fetch("https://export.arxiv.org/api/query?"+new URLSearchParams({id_list:e}))},fetchCvfHTML=async e=>{let a,t;if(a=e.endsWith(".pdf")?e.replace("/papers_backup/","/papers/").replace("/papers/","/html/").replace(".pdf",".html"):e,t=await fetch(a).then(e=>e.ok?e.text():""),!t&&a.includes("thecvf.com/content_")){const{conf:n,year:o}=parseCVFUrl(e);a=a.replace(`/content_${n}_${o}/`,`/content_${n.toLowerCase()}_${o}/`),t=await fetch(a).then(e=>e.ok?e.text():"")}return t},fetchOpenReviewNoteJSON=async e=>{e=e.match(/id=([\w-])+/)[0].replace("id=","");return fetch("https://api.openreview.net/notes?id="+e).then(e=>e.json())},fetchOpenReviewForumJSON=async e=>{e=e.match(/id=([\w-])+/)[0].replace("id=","");return fetch("https://api.openreview.net/notes?forum="+e).then(e=>e.json())},fetchDom=async e=>{const a=await fetch(e).then(e=>e.ok?e.text():"");return(new DOMParser).parseFromString(a.replaceAll("\n",""),"text/html")},fetchText=async e=>{try{const a=await fetch(e),t=a.ok?await a.text():"";return t.trim()}catch(e){return console.log("fetchText error:",e),""}},makeArxivPaper=async e=>{const a=await fetchArxivXML(e),t=await a.text();var n=(new DOMParser).parseFromString(t.replaceAll("\n",""),"text/xml");const o=Array.from(n.querySelectorAll("author name")).map(e=>e.innerHTML);var r=o.join(" and "),i=Array.from(n.getElementsByTagName("link")).map(e=>e.getAttribute("href")).filter(e=>e.includes("arxiv.org/pdf/"))[0].replace(/v\d+\.pdf$/gi,".pdf"),l=n.querySelector("entry title").innerHTML,s=n.querySelector("entry published").innerHTML.slice(0,4),c=o[0].split(" ").reverse()[0].toLowerCase()+s+firstNonStopLowercase(l),n="";n+=`@article{${c},
`,n+=`title={${l} },
`,n+=`author={${r} },
`,n+=`year={${s}},
`,n+=`journal={arXiv preprint arXiv: ${e}}
`;return{author:r,bibtex:n+="}",conf:"arXiv",id:e,key:c,pdfLink:i,title:l,venue:"",year:s}},makeNeuripsPaper=async e=>{const a=(e=e.endsWith(".pdf")?e.replace("/file/","/hash/").replace("-Paper.pdf","-Abstract.html"):e).split("/").slice(-1)[0].replace("-Paper.pdf",""),t=await fetchDom(e);var n=Array.from(t.getElementsByTagName("a")).filter(e=>"Bibtex"===e.innerText)[0]?.getAttribute("href");let o,r,i,l,s;if(n)o=await fetchText(""+parseUrl(e).host+n),{author:r,citationKey,title:i,year:l}=bibtexToObject(o),r=flipAndAuthors(r),s=citationKey;else{const p=Array.from(t.querySelectorAll(".container-fluid .col p"));i=t.getElementsByTagName("h4")[0].innerHTML;const d=Array.from(document.querySelectorAll("h4")).filter(e=>"Authors"===e.innerText)[0];r=d.nextElementSibling.innerText.split(", ").map((e,a)=>{const t=e.split(" "),n=t.map((e,a)=>capitalize(e));return n.join(" ")}).join(" and "),l=p[0].innerHTML.match(/\d{4}/)[0],s="neurips"+l+a.slice(0,8),o="",o+=`@inproceedings{NEURIPS${l}_${a.slice(0,8)},
`,o+=`author={${r}},
`,o+=`booktitle={Advances in Neural Information Processing Systems},
`,o+=`editor={H.Larochelle and M.Ranzato and R.Hadsell and M.F.Balcan and H.Lin},
`,o+=`publisher={Curran Associates, Inc.},
`,o+=`title={${i}},
`,o+=`url={${e}},
`,o+=`year={${l}}
`,o+="}",o=bibtexToString(o)}var c=e,n=`NeurIPS-${l}_`+a.slice(0,8),e="NeurIPS "+l;return{author:r,bibtex:o,conf:e,id:n,key:s,note:"Accepted @ "+e,pdfLink:c,title:i,venue:"NeurIPS",year:l}},makeCVFPaper=async e=>{const a=await fetchCvfHTML(e),t=(new DOMParser).parseFromString(a.replaceAll("\n",""),"text/html");var n=t.getElementById("papertitle").innerText.trim(),o=t.querySelector("#authors i").innerText.split(",").map(e=>e.trim()).join(" and "),{year:r,id:i,conf:l}=parseCVFUrl(e);let s="";if(e.endsWith(".pdf"))s=e;else{const d=Array.from(t.getElementsByTagName("a")).filter(e=>"pdf"===e.innerText)[0].getAttribute("href");d.startsWith("../")&&(d=d.replaceAll("../","")),d.startsWith("/")||(d="/"+d),s="http://openaccess.thecvf.com"+d}var c=`Accepted @ ${l} `+r;const p=bibtexToString(t.querySelector(".bibref").innerText);e=p.split("{")[1].split(",")[0];return{author:o,bibtex:p,conf:l,id:i,key:e,note:c,pdfLink:s,title:n,venue:l,year:r}},makeOpenReviewBibTex=(e,a)=>{var t=e.content.title,n=e.content.authors.join(" and "),o=e.cdate?new Date(e.cdate).getFullYear():"0000";e.cdate||log("makeOpenReviewBibTex: no cdate found in",e);var r=e.content.authors[0].split(" ").reverse()[0];r+=o;e="";return e+=`@inproceedings{${r+=firstNonStopLowercase(t)},
`,e+=`title={${t}},
`,e+=`author={${n}},
`,e+=`year={${o}},
`,e+=`url={${a}},
`,e+="}"},makeOpenReviewPaper=async e=>{var a=await fetchOpenReviewNoteJSON(e),t=await fetchOpenReviewForumJSON(e),n=a.notes[0],o=t.notes,r=n.content.title,i=n.content.authors.join(" and "),l=bibtexToString(n.content._bibtex||makeOpenReviewBibTex(n,e)),a=bibtexToObject(l),t=a.citationKey,a=a.year;let s;s=n.pdf?"https://openreview.net/pdf?id="+n.id:(n.html||e).replace("/forum?id=","/pdf?id=");const c=n.invitation.split("/");let p=c[0].split(".")[0],d=c.slice(1).join("/").split("-")[0].replaceAll("/"," ").replace(" Conference",""),u=p,h=!1;global.overrideORConfs.hasOwnProperty(p)&&(u=global.overrideORConfs[p],h=!0),h&&(d=d.replace(u,""),p=u);e=(p+" "+d).replace(/ \d\d\d\d/g,"").replace(/\s\s+/g," "),n=`OR-${p}-${a}_`+n.id;let m,f,g;m=o.filter(e=>e&&e.content&&-1<["Final Decision","Paper Decision","Acceptance Decision"].indexOf(e.content.title));let y="";return m&&0<m.length&&(f=m[0].content.decision.split(" ").map((e,a)=>0===a?e+"ed":e).join(" "),g=f+` @ ${e} `+a,f.toLowerCase().indexOf("rejected")<0&&(y=e)),"Anonymous"===i&&(g=`Under review @ ${e} ${a} (${(new Date).toLocaleDateString()})`),{author:i,bibtex:l,conf:e,id:n,key:t,note:g,pdfLink:s,title:r,venue:y,year:a}},makeBioRxivPaper=async e=>{var a=e.replace(".full.pdf",""),t="https://api.biorxiv.org//details/biorxiv/"+e.split("/").slice(-2).join("/").replace(".full.pdf","").split("v")[0];const n=await fetch(t).then(e=>e.json());if("ok"!==n.messages[0].status)throw new Error(t+" returned "+n.messages[0].status);const o=n.collection.reverse()[0],r=await fetchText(a),i=(new DOMParser).parseFromString(r.replaceAll("\n",""),"text/html");var l=i.querySelector(".bibtext a").getAttribute("href");const s=bibtexToString(await(await fetch(l)).text());var c=extractAuthor(s),p=await parseIdFromUrl(e),t=s.split("\n")[0].split("{")[1].replace(",","").trim(),a=cleanBiorxivURL(e)+".full.pdf",l=o.title,e=o.date.split("-")[0];return{author:c,bibtex:s,conf:"BioRxiv",id:p,key:t,note:"",pdfLink:a,title:l,venue:"",year:e}},makePMLRPaper=async e=>{var a=e.split("/").reverse()[0].split(".")[0],t=await parseIdFromUrl(e);const n=e.includes(".html")?e:e.split("/").slice(0,-2).join("/")+`/${a}.html`;var o=n.replace(".html","")+`/${a}.pdf`;const r=await fetchDom(n);r.getElementById("button-bibtex1").getAttribute("onclick").match(/https.+\.bib/)[0];const i=r.getElementById("bibtex").innerText.replaceAll("\t"," ").replaceAll(/\s\s+/g," ");let l=i;for(const u of i.match(/,\ ?\w+ ?= ?{/g))l=l.replace(u,u.replace(", ",",\n    ").replace(" = ","="));l.endsWith("}}")&&(l=l.slice(0,-2)+"}\n}"),l=bibtexToString(l);var s=extractAuthor(l),e=r.getElementsByTagName("h1")[0].innerText,c=extractBibtexValue(l,"year");let p=extractBibtexValue(l,"booktitle").replaceAll("Proceedings of the",""),d=p;note="Accepted @ "+p+`(${c})`;for(const h in global.overridePMLRConfs)if(p.includes(h)){d=global.overridePMLRConfs[h],p=d+" "+c,note="Accepted @ "+p;break}return{author:s,bibtex:l,conf:p,id:t,key:a,note:note,pdfLink:o,title:e,venue:d,year:c}},findACLValue=(e,a)=>{return Array.from(e.querySelectorAll("dt")).filter(e=>e.innerText.includes(a))[0].nextElementSibling.innerText},makeACLPaper=async e=>{e=e.replace(".pdf","");const a=await fetchDom(e);var t=a.getElementById("citeBibtexContent");if(t){var n=a.getElementById("title").innerText,o=bibtexToString(t.innerText),r=bibtexToJson(o)[0];const s=r.entryTags;var i=s.year,l=s.author.replace(/\s+/g," ").split(" and ").map(e=>e.split(",").map(e=>e.trim()).reverse().join(" ")).join(" and "),e=r.citationKey,t=findACLValue(a,"Venue"),r=findACLValue(a,"PDF");return{author:l,bibtex:o,conf:t,id:`ACL-${t}-${i}_`+findACLValue(a,"Anthology ID"),key:e,note:`Accepted @ ${t} `+i,pdfLink:r,title:n,venue:t,year:i}}},makePNASPaper=async e=>{e=e.replace(".full.pdf","").replace(/\/doi\/e?pdf\//,"/doi/abs/");const a=await fetchDom(e);var t=a.getElementsByTagName("h1")[0].innerText,n=Array.from(a.querySelectorAll(".authors span[property='author'] a:not([property='email']):not(.orcid-id)")).filter(e=>!e.getAttribute("href").includes("mailto:")).map(e=>e.innerText).join(" and "),o=a.querySelector("span[property='datePublished']").innerText.match(/\d{4}/g)[0],r=`PNAS-${o}_`+(e.endsWith("/")?e.split("/").slice(-2):e.split("/").slice(-1))[0];const i=e.includes("/doi/pdf/")||e.includes("/doi/epdf/")?e.replace("/doi/epdf/","/doi/pdf/"):e.replace("/doi/abs/","/doi/pdf/").replace("/doi/full/","/doi/pdf/");var l=Array.from(a.querySelector(".self-citation").getElementsByTagName("a")).map(e=>e.getAttribute("href")).filter(e=>e.includes("https://doi.org"))[0].split("/").slice(-2).join("/"),e="doi:"+l;return{author:n,bibtex:bibtexToString(`@article{${e}, author={${n}}, title={${t}}, journal = {Proceedings of the National Academy of Sciences}, year={${o}}, doi={${l}}, eprint={${i}}, URL={${i.replace("/doi/pdf/","/doi/abs/")}} }`),id:r,key:e,note:`Published @ PNAS (${o})`,pdfLink:i,title:t,venue:"PNAS",year:o}},makeNaturePaper=async e=>{var a=(e=e.replace(".pdf","").split("#")[0])+".pdf",t=e.split("/").reverse()[0];const n=await fetchDom(e);var o=n.querySelector("h1.c-article-title").innerText;const r=Array.from(n.querySelectorAll("ul.c-article-author-list li")).map(e=>e.innerText.replace(/(\ ?,)|&||\d/g,"").split(/orcid/i)[0].trim()).filter(e=>0<e.length).join(" and ");var i=n.querySelector(".c-article-info-details").innerText.match(/\(\d{4}\)/)[0].replace(/\(|\)/g,""),l=n.querySelector(".c-article-info-details [data-test]").innerText,s="Nature_"+t,c=document.querySelector(".c-bibliographic-information__citation").innerText.split("https://doi.org/")[1],e="https://doi.org/"+c,t=""+r.split(" ")[1]+i+firstNonStopLowercase(o),e=bibtexToString(`@article{${t}, author={${r}}, title={${o}}, journal = {${l}}, year={${i}}, doi={${c}}, url={${e}} }`);return{author:r,bibtex:e,id:s,key:t,note:`Published @ ${l} (${i})`,pdfLink:a,title:o,venue:l,year:i}},makeACSPaper=async e=>{const a=(e=e.replace("pubs.acs.org/doi/pdf/","pubs.acs.org/doi/").split("?")[0]).split("/doi/")[1];var t=`https://pubs.acs.org/action/downloadCitation?doi=${encodeURIComponent(a)}&include=cit&format=bibtex&direct=true`,n=await fetchText(t);const o=bibtexToObject(n);var r=o.author.replaceAll("\n","").trim(),i=o.title.trim(),l=o.year.trim(),s=o.citationKey.trim(),t=e.replace("/doi/","/doi/pdf/"),e=`Published @ ${o.journal} (${o.year})`;return{author:r,bibtex:n,id:"ACS_"+a.replaceAll(".","").replaceAll("/",""),key:s,note:e,pdfLink:t,title:i,venue:o.journal,year:l}},makeIOPPaper=async e=>{(e=e.split("#")[0]).endsWith("/pdf")&&(e=e.slice(0,-4));const a=await fetchDom(e);var t=Array.from(a.querySelectorAll(".btn-multi-block a")).filter(e=>"BibTeX"===e.innerText).map(e=>e.getAttribute("href"))[0],n="https://"+parseUrl(e).host+t,o=await fetchText(n);const r=bibtexToObject(o);var i=r.author.replaceAll("\n","").trim(),l=r.title.trim(),s=r.year.trim(),c=r.citationKey.trim(),p=e+"/pdf",t=r.journal,n=`Published @ ${t} (${s})`;const d=e.split("/article/").reverse()[0];return{author:i,bibtex:o,id:"IOPscience_"+d.replaceAll(".","").replaceAll("/",""),key:c,note:n,pdfLink:p,title:l,venue:t,year:s}},tryCrossRef=async e=>{try{var a="https://api.crossref.org/works?rows=1&mailto=schmidtv%40mila.quebec&select=event%2Ctitle&query.title="+encodeURI(e.title);const n=await fetch(a).then(e=>e.json());if("ok"!==n.status)return log(`[PM][Crossref] ${a} returned `+n.message.status),{note:null};if(0===n.message.items.length)return{note:null};if(n.message.items[0].title[0].toLowerCase().replaceAll("\n"," ").replaceAll(/\s\s+/g," ")!==e.title.toLowerCase().replaceAll("\n"," ").replaceAll(/\s\s+/g," "))return{note:null};if(!n.message.items[0].event||!n.message.items[0].event.name)return{note:null};info("Found a CrossRef match");var t=n.message.items[0].event.name.trim();return{venue:t,note:`Accepted @ ${t} -- [crossref.org]`}}catch(e){return log("[PM][Crossref]",e),{note:null}}},tryDBLP=async e=>{try{var a=encodeURI(e.title);const i=await fetch(`https://dblp.org/search/publ/api?q=${a}&format=json`).then(e=>e.json());if(!(i.result&&i.result.hits&&i.result.hits.hit&&i.result.hits.hit.length))return log("[PM][DBLP] No hits found"),{note:null};for(const l of i.result.hits.hit.sort((e,a)=>parseInt(e.info.year,10)-parseInt(a.info.year,10)))if(decodeHtml(l.info.title.toLowerCase().replaceAll("\n"," ").replaceAll(".","").replaceAll(/\s\s+/g," "))===e.title.toLowerCase().replaceAll("\n"," ").replaceAll(".","").replaceAll(/\s\s+/g," ")&&"CoRR"!==l.info.venue){info("Found a DBLP match");var t=await fetchText(l.info.url+".bib"),n=l.info.venue.toLowerCase().replaceAll(".","").trim(),o=(global.journalAbbreviations[n]||l.info.venue).trim(),r=l.info.year;l.info.url;return{venue:o,note:`Accepted @ ${o} ${r} -- [dblp.org]`,bibtex:t}}return log("[PM][DBLP] No match found"),{note:null}}catch(e){return log("[PM][DBLP]",e),{note:null}}},tryPreprintMatch=async e=>{let a,t,n;return dblpMatch=await tryDBLP(e),a=dblpMatch.note,t=dblpMatch.venue,n=dblpMatch.bibtex,a||(crossRefMatch=await tryCrossRef(e),a=crossRefMatch.note,t=crossRefMatch.venue),{note:a,venue:t,bibtex:n}},initPaper=async e=>{e.note||(e.note=""),e.md=`[${e.title}](${e.pdfLink})`,e.tags=[],e.codeLink="",e.favorite=!1,e.favoriteDate="",e.addDate=(new Date).toJSON(),e.lastOpenDate=e.addDate,e.count=1,e.code={};for(const a in e)e.hasOwnProperty(a)&&"string"==typeof e[a]&&(e[a]=e[a].trim());return e=await autoTagPaper(e),validatePaper(e),e},autoTagPaper=async t=>{try{var e,n,o=await getStorage("autoTags");if(!o||!o.length)return t;let a=new Set;for(const r of o)r.tags?.length&&(r.title||r.author)&&(e=!r.title||new RegExp(r.title,"i").test(t.title),n=!r.author||new RegExp(r.author,"i").test(t.author),e&&n&&r.tags.forEach(e=>a.add(e)));return t.tags=Array.from(a).sort(),t.tags.length&&log("Automatically adding tags:",t.tags),t}catch(e){return log("Error auto-tagging:",e),log("Paper:",t),t}},makePaper=async(e,a,t)=>{let n;if(e.arxiv)n=await makeArxivPaper(t),n.source="arxiv";else if(e.neurips)n=await makeNeuripsPaper(a),n.source="neurips";else if(e.cvf)n=await makeCVFPaper(a),n.source="cvf";else if(e.openreview)n=await makeOpenReviewPaper(a),n.source="openreview";else if(e.biorxiv)n=await makeBioRxivPaper(a),n.source="biorxiv";else if(e.pmlr)n=await makePMLRPaper(a),n.source="pmlr";else if(e.acl)n=await makeACLPaper(a),n&&(n.source="pmlr");else if(e.pnas)n=await makePNASPaper(a),n&&(n.source="pnas");else if(e.nature)n=await makeNaturePaper(a),n&&(n.source="nature");else if(e.acs)n=await makeACSPaper(a),n&&(n.source="acs");else{if(!e.iop)throw new Error("Unknown paper source: "+JSON.stringify({is:e,url:a,id:t}));n=await makeIOPPaper(a),n&&(n.source="iop")}if(void 0!==n)return initPaper(n)},findFuzzyPaperMatch=e=>{for(const t in global.state.papers)if("__dataVersion"!==t){var a=global.state.papers[t];if(Math.abs(a.title.length-e.title.length)<global.fuzzyTitleMatchMinDist)if(levenshtein(a.title,e.title)<global.fuzzyTitleMatchMinDist)return a.id}return null};